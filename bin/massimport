#!/usr/bin/env node

var mass_importer = require('../libs/mass_importer');
var winston = require('winston');
var MongoDB = require('winston-mongodb').MongoDB;
var config = require('../config');

winston.add(MongoDB, {db: config.mongodbUrl});
winston.add(winston.transports.File, { filename: 'logs/massimport.log' });

winston.info("Starting import");

mass_importer.import(winston, function(err) {
  if(err) {
    winston.error(err);
    throw err;
  }
  
  winston.info("Done", function() {
    process.exit(0);
  });
});